!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e){window.questionWrapCallback=function(t,e){function i(){m.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),w.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),g.attr("transform",function(t){for(var e=0,i=t.name.split(""),n=0;n<i.length;n++)e+=i[n].match(/^[\u4E00-\u9FA5]{1,}$/)?1:.5;var o=0==t.sign?7*e:4.5*e;return 0==t.sign?"translate("+(t.x-o)+","+(t.y+5)+")":"translate("+(t.x-o)+","+(t.y+2)+")"})}function n(t){d3.event.active||f.alphaTarget(.1).restart(),t.fx=t.x,t.fy=t.y}function o(t){t.fx=d3.event.x,t.fy=d3.event.y}function a(t){d3.event.active||f.alphaTarget(0),t.fx=null,t.fy=null}if(Site_INFO.QuestionNodes==[]||Site_INFO.QuestionNodes.length<1)return $("#question-wrap .data-list").html("").html('<div style="width:100%; text-align:center; padding-top:'+($("#question-wrap").height()/2-100)+'px"><img src=" '+Site_INFO.resource+'/assist/images/cipin/icon-notdata.png" alt=""><br><br>暂时无法分析出疑问词关联图，可能是数据量太少的原因...</div>'),$("#question-list-wrap").parents(".cipin-box").hide(),!1;var s=window.location.href,r=window.location.hostname;if(s.indexOf("ciku")>0){var c=s.split("/ciku/detail/")[1];c.indexOf("/")>0&&(c=c.split("/")[0])}var u={nodes:Site_INFO.QuestionNodes,links:Site_INFO.QuestionLinks},h=0,d=d3.select("#Question-chart"),p=+d.attr("width"),l=+d.attr("height"),f=d3.forceSimulation(u.nodes).force("charge",d3.forceManyBody().strength(100)).force("link",d3.forceLink(u.links).strength(1).distance(40)).force("collision",d3.forceCollide(30)).force("center",d3.forceCenter(p/2,l/2)),m=d.append("g").attr("class","links").selectAll("line").data(u.links).enter().append("line").attr("stroke","#ccc").attr("stroke-width",1);d.append("pattern").attr("id","avatar5").attr("patternContentUnits","objectBoundingBox").attr("width","100%").attr("height","100%").append("image").attr("width","1").attr("height","1").attr("xlink:href",chartWaterMark);var v=d.append("g").attr("class","water");v.append("circle").attr("cx",350).attr("cy",250).attr("r",90).attr("fill-opacity",.3).attr("fill","url(#avatar5)");var w=d.append("g").attr("class","nodes").selectAll("circle").data(u.nodes).enter().append("circle").attr("r",function(t,e){return h+=t.datacount,0==t.sign?30:20}).attr("stroke","#000").attr("stroke-width",0).attr("fill",function(t,e){return 0==t.sign?"rgb(138, 182, 250)":"rgb(152, 204, 97)"}).style("cursor","pointer").style("overflow","hidden").on("mouseover",function(t,e){var i=[];m.attr("stroke",function(e){return e.source===t||e.target===t?(i.push(e),"#709ee6"):"#ccc"}),m.attr("stroke-width",function(e){return e.source===t||e.target===t?2:1}),setTimeout(function(){if(w.attr("stroke-width","2"),w.attr("stroke",function(e){return e.name===t.name?"#ffbe32":"#fff"}),w.attr("stroke",function(t){var e;return i.map(function(i){(i.source.index===t.index||i.target.index===t.index)&&(e="#ffbe32")}),e}),1==t.sign){$("#question-wrap .mouseover-tips-frist").hide(),$("#question-wrap .mouseover-tips-second").stop().fadeIn(300).html("").find(".keyword").text(t.name).end(),$("#question-wrap .mouseover-tips-second").html("").append("样本数据中，<span> "+t.name+" </span> ");for(var e=0;e<i.length;e++)3>e&&0!=t.datacount&&$("#question-wrap .mouseover-tips-second").append("以 <span>"+i[e].source.name+"</span> 的提问方式出现了 <span>"+t.datacount+"</span> 次，所占百分为 <span>"+(t.datacount/h*100).toFixed(1)+"%</span>；")}else{for(var n="",e=0;e<i.length;e++)6>e&&(n+=e+1==i.length||5==e?i[e].source.name==t.name?i[e].target.name:i[e].source.name:(i[e].source.name==t.name?i[e].target.name:i[e].source.name)+" 、"),6==e&&(n+="等");$("#question-wrap .mouseover-tips-second").hide(),$("#question-wrap .mouseover-tips-frist").stop().fadeIn(300).find(".keyword").text(t.name).end().find(".about").text(n).end()}},0)}).on("mouseout",function(t,e){m.attr("stroke","#ccc"),m.attr("stroke-width","1"),w.attr("stroke-width","0"),g.on("mouseover",function(t,e){w.attr("stroke-width","2")}),$("#question-wrap .mouseover-tips-frist").hide(),$("#question-wrap .mouseover-tips-second").hide(),g.on("mouseover",function(t,e){1==t.sign?$("#question-wrap .mouseover-tips-second").show():$("#question-wrap .mouseover-tips-frist").show()})}).on("click",function(t,i){var n=[];m.attr("stroke",function(e){(e.source===t||e.target===t)&&n.push(e)});var o=n[Math.floor(Math.random()*n.length)],a="";a=o.source!=t?o.source:o.target,1==t.sign?"site:"==Site_INFO.site_type?window.open("https://www.baidu.com/s?wd="+e.content+" "+t.name+" "+a.name+"&rn=10&pn=0#0"):(s.indexOf("naotu")>0&&window.open("http://"+r+"/seo/words/"+e.content+" "+t.name+" "+a.name),s.indexOf("ciku")>0&&window.open("http://"+r+"/ciku/detail/"+c+"/"+t.name+" "+a.name)):"site:"==Site_INFO.site_type?window.open("https://www.baidu.com/s?wd="+e.content+" "+t.name+"&rn=10&pn=0#0"):(s.indexOf("naotu")>0&&window.open("http://"+r+"/seo/words/"+e.content+" "+t.name),s.indexOf("ciku")>0&&window.open("http://"+r+"/ciku/detail/"+c+"/"+t.name))}).call(d3.drag().on("start",n).on("drag",o).on("end",a)),g=d.selectAll("g.anchorNode").data(u.nodes).enter().append("svg:g").attr("class","anchorNode");g.append("svg:circle").attr("r",0).style("fill","#FFF"),g.append("svg:text").text(function(t,e){return t.name}).style("fill","#fff").style("font-family","Arial").style("cursor","pointer").style("font-size",function(t,e){return 0==t.sign?14:9}).on("mouseover",function(t,e){var i=[];m.attr("stroke",function(e){return e.source===t||e.target===t?(i.push(e),"#709ee6"):"#ccc"}),m.attr("stroke-width",function(e){return e.source===t||e.target===t?2:1}),setTimeout(function(){if(w.attr("stroke-width","2"),w.attr("stroke",function(e){return e.name===t.name?"#ffbe32":"#fff"}),w.attr("stroke",function(t){var e;return i.map(function(i){(i.source.index===t.index||i.target.index===t.index)&&(e="#ffbe32")}),e}),1==t.sign){$("#question-wrap .mouseover-tips-frist").hide(),$("#question-wrap .mouseover-tips-second").show().html("").find(".keyword").text(t.name).end(),$("#question-wrap .mouseover-tips-second").html("").append("样本数据中，<span> "+t.name+" </span> ");for(var e=0;e<i.length;e++)3>e&&0!=t.datacount&&$("#question-wrap .mouseover-tips-second").append("以 <span>"+i[e].source.name+"</span> 的提问方式出现了 <span>"+t.datacount+"</span> 次，所占百分为 <span>"+(t.datacount/h*100).toFixed(1)+"%</span>；")}else{for(var n="",e=0;e<i.length;e++)6>e&&(n+=e+1==i.length||5==e?i[e].source.name==t.name?i[e].target.name:i[e].source.name:(i[e].source.name==t.name?i[e].target.name:i[e].source.name)+" 、"),6==e&&(n+="等");$("#question-wrap .mouseover-tips-second").hide(),$("#question-wrap .mouseover-tips-frist").show().find(".keyword").text(t.name).end().find(".about").text(n).end()}},0)}).on("mouseout",function(t,e){m.attr("stroke","#ccc"),m.attr("stroke-width","1")}).on("click",function(t,i){var n=[];m.attr("stroke",function(e){(e.source===t||e.target===t)&&n.push(e)});var o=n[Math.floor(Math.random()*n.length)],a="";a=o.source!=t?o.source:o.target,1==t.sign?"site:"==Site_INFO.site_type?window.open("https://www.baidu.com/s?wd="+Site_INFO.site_type+e.content+" "+t.name+" "+a.name+"&rn=10&pn=0#0"):(s.indexOf("naotu")>0&&window.open("http://"+r+"/seo/words/"+Site_INFO.site_type+e.content+" "+t.name+" "+a.name),s.indexOf("ciku")>0&&window.open("http://"+r+"/ciku/detail/"+c+"/"+t.name+" "+a.name)):"site:"==Site_INFO.site_type?window.open("https://www.baidu.com/s?wd="+Site_INFO.site_type+e.content+" "+t.name+"&rn=10&pn=0#0"):(s.indexOf("naotu")>0&&window.open("http://"+r+"/seo/words/"+Site_INFO.site_type+e.content+" "+t.name),s.indexOf("ciku")>0&&window.open("http://"+r+"/ciku/detail/"+c+"/"+t.name))}).call(d3.drag().on("start",n).on("drag",o).on("end",a)),f.nodes(u.nodes).on("tick",i),f.force("link").links(u.links)},naotuRequireAPI("#question-wrap","_DetailQuestion",questionWrapCallback)}]);