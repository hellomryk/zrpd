!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e){window.relatedWrapCallback=function(t,e){function i(){m.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),v.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),w.attr("transform",function(t){return"translate("+(t.x+10)+","+t.y+")"})}function n(t){d3.event.active||l.alphaTarget(.05).restart(),t.fx=t.x,t.fy=t.y}function o(t){t.fx=d3.event.x,t.fy=d3.event.y}function a(t){d3.event.active||l.alphaTarget(0),t.fx=null,t.fy=null}if(Site_INFO.nodes==[]||Site_INFO.nodes.length<1)return $("#related-wrap .data-list").html("").html('<div style="width:100%; text-align:center; padding-top:'+($("#related-wrap").height()/2-100)+'px"><img src=" '+Site_INFO.resource+'/assist/images/cipin/icon-notdata.png" alt=""><br><br>暂时无法分析出词关联脑图，可能是数据量太少的原因...</div>'),!1;var s=window.location.href,r=window.location.hostname;if(s.indexOf("ciku")>0){var c=s.split("/ciku/detail/")[1];c.indexOf("/")>0&&(c=c.split("/")[0])}var u={nodes:Site_INFO.nodes,links:Site_INFO.links},h=d3.select("#Related-Chart"),d=+h.attr("width"),p=+h.attr("height"),l=d3.forceSimulation(u.nodes).force("charge",d3.forceManyBody().strength(500)).force("link",d3.forceLink(u.links).strength(1).distance(30)).force("collision",d3.forceCollide(25)).force("center",d3.forceCenter(d/2,p/2));h.append("pattern").attr("id","avatar6").attr("patternContentUnits","objectBoundingBox").attr("width","100%").attr("height","100%").append("image").attr("width","1").attr("height","1").attr("xlink:href",chartWaterMark);var f=h.append("g").attr("class","water");f.append("circle").attr("cx",350).attr("cy",280).attr("r",90).attr("fill-opacity",.3).attr("fill","url(#avatar6)");var m=h.append("g").attr("class","links").selectAll("line").data(u.links).enter().append("line").attr("stroke","#ccc").attr("stroke-width",1),v=h.append("g").attr("class","nodes").selectAll("circle").data(u.nodes).enter().append("circle").attr("r",5).attr("stroke","#fff").attr("stroke-width",4).attr("fill","rgb(85, 85, 85)").on("mouseover",function(t,e){var i=[];m.attr("stroke",function(e){return e.source===t||e.target===t?(i.push(e),"#709ee6"):"#ccc"}),m.attr("stroke-width",function(e){return e.source===t||e.target===t?2:1}),setTimeout(function(){v.attr("fill",function(e){return e.name===t.name?"#709ee6":"#333"}),v.attr("fill",function(t){var e;return i.map(function(i){(i.source.index===t.index||i.target.index===t.index)&&(e="#709ee6")}),e}),w.selectAll("text").attr("fill",function(e){return e.name===t.name?"#709ee6":"#666"}),w.selectAll("text").attr("fill",function(t){var e="#666";return i.map(function(i){(i.source.index===t.index||i.target.index===t.index)&&(e="#709ee6")}),e});var e=[];m.attr("",function(i){i.source===t&&e.push(i.target),i.target===t&&e.push(i.source)});for(var n="",o=0;o<e.length;o++)6>o&&(n+=o+1==e.length||5==o?e[o].name:e[o].name+" 、"),6==o&&(n+="等");$("#related-wrap .mouseover-tips").stop().fadeIn(300).find(".keyword").text(t.name).end().find(".about").text(n).end()},0)}).on("mouseout",function(t,e){m.attr("stroke","#ccc"),m.attr("stroke-width","1"),v.attr("fill","#333"),w.selectAll("text").attr("fill","#666"),$("#related-wrap .mouseover-tips").hide()}).call(d3.drag().on("start",n).on("drag",o).on("end",a)),w=h.selectAll("g.anchorNode").data(u.nodes).enter().append("svg:g").attr("class","anchorNode");w.append("svg:circle").attr("r",0).style("fill","#FFF"),w.append("svg:text").text(function(t,e){return t.name}).style("font-family","Arial").style("font-size",14).attr("fill","#666").style("cursor","pointer").on("click",function(t,i){"site:"==Site_INFO.site_type?window.open("https://www.baidu.com/s?wd="+Site_INFO.site_type+e.content+" "+t.name+"&rn=10&pn=0#0"):(s.indexOf("naotu")>0&&window.open("http://"+r+"/seo/words/"+e.content+" "+t.name),s.indexOf("ciku")>0&&window.open("http://"+r+"/ciku/detail/"+c+"/"+t.name))}).on("mouseover",function(t,e){var i=[];m.attr("stroke",function(e){return e.source===t||e.target===t?(i.push(e),"#709ee6"):"#ccc"}),m.attr("stroke-width",function(e){return e.source===t||e.target===t?2:1}),setTimeout(function(){v.attr("fill",function(e){return e.name===t.name?"#709ee6":"#333"}),v.attr("fill",function(t){var e;return i.map(function(i){(i.source.index===t.index||i.target.index===t.index)&&(e="#709ee6")}),e}),w.selectAll("text").attr("fill",function(e){return e.name===t.name?"#709ee6":"#666"}),w.selectAll("text").attr("fill",function(t){var e="#666";return i.map(function(i){(i.source.index===t.index||i.target.index===t.index)&&(e="#709ee6")}),e});var e=[];m.attr("",function(i){i.source===t&&e.push(i.target),i.target===t&&e.push(i.source)});for(var n="",o=0;o<e.length;o++)6>o&&(n+=o+1==e.length||5==o?e[o].name:e[o].name+" 、"),6==o&&(n+="等");$("#related-wrap .mouseover-tips").stop().fadeIn(300).find(".keyword").text(t.name).end().find(".about").text(n).end()},0)}).on("mouseout",function(t,e){$("#related-wrap .mouseover-tips").hide(),m.attr("stroke","#ccc"),m.attr("stroke-width","1"),v.attr("fill","#333"),w.selectAll("text").attr("fill","#666")}).call(d3.drag().on("start",n).on("drag",o).on("end",a)),l.nodes(u.nodes).on("tick",i),l.force("link").links(u.links)},naotuRequireAPI("#related-wrap","_DetailRelated",relatedWrapCallback)}]);